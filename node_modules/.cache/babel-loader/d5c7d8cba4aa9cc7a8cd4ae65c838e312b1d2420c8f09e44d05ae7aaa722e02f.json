{"ast":null,"code":"import _regeneratorRuntime from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Modal from'../Universal/Modal';import styles from'./CheckOutCart.module.css';import{useContext,useState,useRef}from'react';import cartContext from'../store/cartContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CheckOutCart=function CheckOutCart(_ref){var setShowCheckOut=_ref.setShowCheckOut;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSubmitting=_useState2[0],setIsSubmmitting=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submitted=_useState4[0],setSubmitted=_useState4[1];var _useState5=useState({name:true,street:true,city:true,postalCode:true}),_useState6=_slicedToArray(_useState5,2),formInputsValid=_useState6[0],setFormInputsValid=_useState6[1];var context=useContext(cartContext);// budeme pouzivat useRef na ukladani values z inputu\nvar nameInputRef=useRef();var streetInputRef=useRef();var cityInputRef=useRef();var postalCodeInputRef=useRef();var formSubmit=function formSubmit(event){event.preventDefault();// musime si nekam ulozit values z inputu , dostaneme je vzdycky pomoci current.value\nvar enteredNameInput=nameInputRef.current.value;var enteredStreetInput=streetInputRef.current.value;var enteredCityInput=cityInputRef.current.value;var enteredPostalCodeInput=postalCodeInputRef.current.value;// kontrolujeme jestli jsou inputs valid\nvar enteredNameIsValid=enteredNameInput.trim()!=='';var enteredStreetIsValid=enteredStreetInput.trim()!=='';var enteredCityIsValid=enteredCityInput.trim()!=='';var enteredPostalCodeIsValid=enteredPostalCodeInput.trim().length===5;setFormInputsValid({name:enteredNameIsValid,street:enteredStreetIsValid,city:enteredCityIsValid,postalCode:enteredPostalCodeIsValid});var formIsValid=enteredNameIsValid&&enteredStreetIsValid&&enteredCityIsValid&&enteredPostalCodeIsValid;if(!formIsValid){return;// kdyz je tam nejaky ERRRORRR tak kod se diky return ukonci a nepusti uzivatele dal dokud nebude splnena vallidation\n}//subbmiting to backEnd database\nvar submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsSubmmitting(true);_context.next=3;return fetch('https://food-app-57a05-default-rtdb.firebaseio.com/order.json',{method:'POST',body:JSON.stringify({user:{name:enteredNameInput,street:enteredStreetInput,city:enteredCityInput,postalCode:enteredPostalCodeInput},orderedItems:context.items})});case 3:setIsSubmmitting(false);setSubmitted(true);context.clearCart();case 6:case\"end\":return _context.stop();}},_callee);}));return function submit(){return _ref2.apply(this,arguments);};}();submit();};return/*#__PURE__*/_jsxs(Modal,{onClick:function onClick(){return setShowCheckOut(false);},children:[isSubmitting&&/*#__PURE__*/_jsx(\"h4\",{children:\"One Moment Please...\"}),submitted&&/*#__PURE__*/_jsx(\"h2\",{children:\"Your Order has been Proccessed !\"}),!submitted&&!isSubmitting&&/*#__PURE__*/_jsxs(\"div\",{className:styles.checkOut,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.orderSummary,children:\"Your Order Summary Down Below : \"}),/*#__PURE__*/_jsx(\"div\",{className:styles.checkOutItems,children:context.items.map(function(oneSingleItem){var amount=oneSingleItem.amount,id=oneSingleItem.id,name=oneSingleItem.name;return/*#__PURE__*/_jsx(\"div\",{className:styles.cartItem,children:/*#__PURE__*/_jsxs(\"p\",{children:[name,\"  -  x\",amount]})},id);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.actions,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.form,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.CheckOutDetails,children:\"Your Details:\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:formSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(formInputsValid.name?'':styles.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",ref:nameInputRef}),!formInputsValid.name&&/*#__PURE__*/_jsx(\"span\",{children:\"Please enter a valid name.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(formInputsValid.street?'':styles.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"street\",children:\"Street\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"street\",ref:streetInputRef}),!formInputsValid.street&&/*#__PURE__*/_jsx(\"span\",{children:\"Please enter a valid street name.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(formInputsValid.postalCode?'':styles.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"postal\",children:\"Postal Code\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"postal\",ref:postalCodeInputRef}),!formInputsValid.postalCode&&/*#__PURE__*/_jsx(\"span\",{children:\"Postal code has to have 5 characters.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.control,\" \").concat(formInputsValid.city?'':styles.invalid),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"city\",children:\"City\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"city\",ref:cityInputRef}),!formInputsValid.city&&/*#__PURE__*/_jsx(\"span\",{children:\"Please enter a valid city.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setShowCheckOut(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.button,children:\"Order\"})]})]})]})})]})]});};export default CheckOutCart;","map":{"version":3,"names":["Modal","styles","useContext","useState","useRef","cartContext","CheckOutCart","setShowCheckOut","isSubmitting","setIsSubmmitting","submitted","setSubmitted","name","street","city","postalCode","formInputsValid","setFormInputsValid","context","nameInputRef","streetInputRef","cityInputRef","postalCodeInputRef","formSubmit","event","preventDefault","enteredNameInput","current","value","enteredStreetInput","enteredCityInput","enteredPostalCodeInput","enteredNameIsValid","trim","enteredStreetIsValid","enteredCityIsValid","enteredPostalCodeIsValid","length","formIsValid","submit","fetch","method","body","JSON","stringify","user","orderedItems","items","clearCart","checkOut","orderSummary","checkOutItems","map","oneSingleItem","amount","id","cartItem","actions","form","CheckOutDetails","control","invalid","input","button"],"sources":["/Users/petrpospisil/Desktop/myProjects/food App/my-app/src/components/shoppingCart/CheckOutCart.js"],"sourcesContent":["import Modal from '../Universal/Modal'\nimport styles from './CheckOutCart.module.css'\nimport { useContext, useState, useRef } from 'react'\nimport cartContext from '../store/cartContext'\n\n\n\nconst CheckOutCart = ({setShowCheckOut}) => {\n    \n    const [ isSubmitting , setIsSubmmitting ] = useState(false)\n    const [ submitted, setSubmitted ] = useState(false)\n\n    const [formInputsValid, setFormInputsValid ] = useState({\n        name:true,\n        street: true,\n        city: true,\n        postalCode: true\n    })\n    \n    const context = useContext(cartContext)\n\n    // budeme pouzivat useRef na ukladani values z inputu\n    const nameInputRef = useRef()\n    const streetInputRef = useRef()\n    const cityInputRef = useRef()\n    const postalCodeInputRef = useRef()\n\n    \n    const formSubmit = (event) => {\n        event.preventDefault()\n\n        // musime si nekam ulozit values z inputu , dostaneme je vzdycky pomoci current.value\n        const enteredNameInput = nameInputRef.current.value\n        const enteredStreetInput = streetInputRef.current.value\n        const enteredCityInput = cityInputRef.current.value\n        const enteredPostalCodeInput = postalCodeInputRef.current.value\n\n         // kontrolujeme jestli jsou inputs valid\n        const enteredNameIsValid = enteredNameInput.trim() !== ''\n        const enteredStreetIsValid = enteredStreetInput.trim() !== ''\n        const enteredCityIsValid = enteredCityInput.trim() !== ''\n        const enteredPostalCodeIsValid = enteredPostalCodeInput.trim().length === 5\n\n        setFormInputsValid({\n            name:enteredNameIsValid,\n            street: enteredStreetIsValid,\n            city: enteredCityIsValid,\n            postalCode: enteredPostalCodeIsValid\n        })\n\n        const formIsValid = enteredNameIsValid && enteredStreetIsValid && enteredCityIsValid && enteredPostalCodeIsValid \n\n        if(!formIsValid){\n             return // kdyz je tam nejaky ERRRORRR tak kod se diky return ukonci a nepusti uzivatele dal dokud nebude splnena vallidation\n        }\n\n        //subbmiting to backEnd database\n        const submit = async () => {\n            setIsSubmmitting(true)\n            await fetch('https://food-app-57a05-default-rtdb.firebaseio.com/order.json', {\n                method: 'POST',\n                body: JSON.stringify({\n                    user: {\n                        name: enteredNameInput,\n                        street: enteredStreetInput,\n                        city: enteredCityInput,\n                        postalCode: enteredPostalCodeInput\n                    },\n                    orderedItems: context.items\n                })\n            })\n            setIsSubmmitting(false)\n            setSubmitted(true)\n            context.clearCart()\n        }\n        submit()\n        \n    }\n\n\n    return <Modal onClick={ () => setShowCheckOut(false)}>\n        { isSubmitting && <h4>One Moment Please...</h4>}\n        { submitted &&  <h2>Your Order has been Proccessed !</h2>}\n\n        {!submitted && !isSubmitting && <div className={styles.checkOut}>\n            \n\n                <h3 className={styles.orderSummary}>Your Order Summary Down Below : </h3>\n                <div className={styles.checkOutItems}>\n            {\n                context.items.map( (oneSingleItem) => {\n                    const { amount,id, name } = oneSingleItem\n                   return <div key={id} className={styles.cartItem}>\n                        <p>{name}  -  x{amount}</p>\n                            </div>\n                })\n            }\n\n                </div>\n             <div className={styles.actions}>\n             <div className={styles.form}>\n                    <h3 className={styles.CheckOutDetails}>Your Details:</h3>\n                    <form onSubmit={formSubmit}>\n                        <div className={`${styles.control} ${formInputsValid.name ? '' : styles.invalid}`}>\n                                <label htmlFor=\"name\">Name</label>\n                            <div className={styles.input}>\n                                <input type=\"text\" id='name' ref={nameInputRef}/>\n                                { !formInputsValid.name && <span>Please enter a valid name.</span>}\n                            </div>\n                        </div>\n                        <div className={`${styles.control} ${formInputsValid.street ? '' : styles.invalid}`}>\n                            <label htmlFor=\"street\">Street</label>\n                            <div className={styles.input}>\n                                <input type=\"text\" id='street' ref={streetInputRef}/>\n                                { !formInputsValid.street && <span>Please enter a valid street name.</span>}\n                            </div>\n                        </div>\n                        <div className={`${styles.control} ${formInputsValid.postalCode ? '' : styles.invalid}`}>\n                            <label htmlFor=\"postal\">Postal Code</label>\n                            <div className={styles.input}>\n                                <input type=\"text\" id='postal' ref={postalCodeInputRef}/>\n                                { !formInputsValid.postalCode && <span>Postal code has to have 5 characters.</span>}\n                            </div>\n                        </div>\n                        <div className={`${styles.control} ${formInputsValid.city ? '' : styles.invalid}`}>\n                            <label htmlFor=\"city\">City</label>\n                            <div className={styles.input}>\n                                <input type=\"text\" id='city' ref={cityInputRef }/>\n                                { !formInputsValid.city && <span>Please enter a valid city.</span>}\n                            </div>\n                        </div>\n                        <div className={styles.actions}>\n                            <button type='button' onClick={() => setShowCheckOut(false)}>Cancel</button>\n                            <button className={styles.button}>Order</button>\n                        </div>\n                    </form>\n                </div>\n             </div>\n        </div>\n        }\n\n    </Modal>\n}\n\nexport default CheckOutCart"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}