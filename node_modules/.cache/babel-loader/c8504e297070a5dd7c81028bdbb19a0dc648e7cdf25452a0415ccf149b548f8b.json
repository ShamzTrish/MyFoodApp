{"ast":null,"code":"import _toConsumableArray from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/petrpospisil/Desktop/myProjects/food App/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import CartContext from\"./cartContext\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var CartProvider=function CartProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),itemsValue=_useState2[0],setItemsValue=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPrice=_useState4[0],setTotalPrice=_useState4[1];var addItemToCartHandler=function addItemToCartHandler(oneItem){setTotalPrice(function(previousState){return previousState+oneItem.amount*oneItem.price;});var clickedItem=itemsValue.filter(function(oneFilteredItem){return oneFilteredItem.id===oneItem.id;});var finalItems=itemsValue;if(clickedItem.length>0){var findIndex=itemsValue.findIndex(function(oneItemIndex){return oneItemIndex.id===oneItem.id;});var joinItems=_objectSpread(_objectSpread({},clickedItem[0]),{},{amount:clickedItem[0].amount+oneItem.amount});finalItems[findIndex]=joinItems;}else{finalItems=[].concat(_toConsumableArray(itemsValue),[oneItem]);}setItemsValue(finalItems);};var removeItemFromCartHandler=function removeItemFromCartHandler(oneItem){setTotalPrice(function(previousState){return previousState-oneItem.price;});var clickedItem=itemsValue.filter(function(oneFilteredItemItem){return oneFilteredItemItem.id===oneItem.id;});var finalItems=itemsValue;if(clickedItem[0].amount===1){finalItems=itemsValue.filter(function(oneFilteredItem){return oneFilteredItem.id!==oneItem.id;});}else{var findIndex=itemsValue.findIndex(function(oneItemIndex){return oneItemIndex.id===oneItem.id;});var updatedItem=_objectSpread(_objectSpread({},clickedItem[0]),{},{amount:clickedItem[0].amount-1});finalItems[findIndex]=updatedItem;}setItemsValue(finalItems);};var clearCartHandler=function clearCartHandler(){setItemsValue([]);setTotalPrice(0);};var cartContext={items:itemsValue,totalAmount:totalPrice,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,clearCart:clearCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["CartContext","useState","CartProvider","props","itemsValue","setItemsValue","totalPrice","setTotalPrice","addItemToCartHandler","oneItem","previousState","amount","price","clickedItem","filter","oneFilteredItem","id","finalItems","length","findIndex","oneItemIndex","joinItems","removeItemFromCartHandler","oneFilteredItemItem","updatedItem","clearCartHandler","cartContext","items","totalAmount","addItem","removeItem","clearCart","children"],"sources":["/Users/petrpospisil/Desktop/myProjects/food App/my-app/src/components/store/CartProvider.js"],"sourcesContent":["import CartContext from \"./cartContext\"\nimport { useState } from \"react\"\n\nconst CartProvider = (props) => {\n\n    const [ itemsValue, setItemsValue ] = useState([])\n    const [ totalPrice, setTotalPrice ] = useState(0)\n\n    const addItemToCartHandler = (oneItem) => {\n        setTotalPrice((previousState) => previousState + oneItem.amount * oneItem.price)\n        \n        const clickedItem = itemsValue.filter( (oneFilteredItem) => {\n            return oneFilteredItem.id === oneItem.id\n        })\n        \n        let finalItems = itemsValue\n\n        if(clickedItem.length > 0){\n           const findIndex = itemsValue.findIndex( (oneItemIndex) => {\n                return oneItemIndex.id === oneItem.id\n            })\n            \n            const joinItems = {\n                ...clickedItem[0],\n                amount: clickedItem[0].amount + oneItem.amount\n            }\n            finalItems[findIndex] = joinItems\n        \n        } else {\n\n            finalItems = [...itemsValue, oneItem]\n        }\n\n        setItemsValue(finalItems)\n    }\n\n    const removeItemFromCartHandler = (oneItem) => {\n        \n        setTotalPrice((previousState) => previousState - oneItem.price)\n\n        const  clickedItem = itemsValue.filter( (oneFilteredItemItem) => {\n            return oneFilteredItemItem.id === oneItem.id\n        })\n\n        let finalItems = itemsValue\n\n        if(clickedItem[0].amount === 1){\n            finalItems = itemsValue.filter ( ( oneFilteredItem ) => {\n                return oneFilteredItem.id !== oneItem.id\n            })\n        } else {\n            const findIndex = itemsValue.findIndex( (oneItemIndex) => {\n                return oneItemIndex.id === oneItem.id\n            })\n\n            const updatedItem = {\n                ...clickedItem[0],\n                amount: clickedItem[0].amount - 1\n            }\n\n            finalItems[findIndex] = updatedItem\n        }\n        \n        setItemsValue(finalItems)\n    }\n\n\n    const clearCartHandler = () => {\n        setItemsValue([])\n        setTotalPrice(0)\n    }\n\n    const cartContext = {\n        items: itemsValue,\n        totalAmount: totalPrice,\n        addItem: addItemToCartHandler,\n        removeItem: removeItemFromCartHandler,\n        clearCart: clearCartHandler,\n    }\n \n    return <CartContext.Provider value={cartContext}>\n            {props.children}\n         </CartContext.Provider>\n}\n\nexport default CartProvider"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}